<div class="row mt-3">
  <div class="col-md-12">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a [routerLink]="['../']">Reports</a></li>
        <li class="breadcrumb-item disabled" [ngClass]="{ active: !this.showingFileReport }">
          <ng-container *ngIf="this.showingFileReport; else elseReport">
            <a (click)="showingFileReport = false" [routerLink]="'./'">{{
              "Batch Report " + this.batchReport.id
              }}</a>
          </ng-container>
          <ng-template #elseReport>
            {{ "Batch Report " + this.batchReport.id }}
          </ng-template>
        </li>
        <li class="breadcrumb-item active" *ngIf="this.showingFileReport">
          {{ this.fileReport._embedded.file.fileName }}
        </li>
      </ol>
    </nav>
  </div>
</div>

<div [hidden]="this.route.children.length === 1">
  <!-- <h3 class="text-dark">Batch Report</h3> -->
  <div class="row mt-3">
    <div class="col-md-12">
      <h5 class="text-dark">Summary</h5>

      <table class="table table-striped mt-3 mb-4">
        <thead class="">
          <tr>
            <th>Batch</th>
            <th>Configuration</th>
            <th>Processing Status</th>
            <th>Submitted</th>
            <th>Finished</th>
            <th>Problematic Files</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-monospace font-weight-bold td-break-all " style="max-width:250px; min-width: 100px;">
              <a [routerLink]="['/batches', this.batchReport._embedded.batch.id]">{{
                this.batchReport._embedded.batch.description }}
              </a>
            </td>
            <td class="text-monospace font-weight-bold td-break-all " style="max-width:250px; min-width: 100px;">
              <ng-container *ngIf="this.batchReport._embedded.configuration; else elseTemplate">
                  <a [routerLink]="['/configurations', this.batchReport._embedded.configuration.id]">
                    {{ this.batchReport._embedded.configuration.description }}
                  </a>
              </ng-container>
              <ng-template #elseTemplate>
                  <em class="font-weight-normal">{{ 'Deleted Configuration' }}</em>
              </ng-template>
              
             
            </td>
            <td>{{ this.resolveCamelCase(this.batchReport.status) }}</td>
            <td>{{ this.batchReport.creationDate | date: "HH:mm:ss" }}</td>
            <td>{{ this.batchReport.finishedDate | date: "HH:mm:ss" }}</td>
            <td>{{ this.batchReport.summary.problematicFiles }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <h5 class="mb-3 mt-3 text-dark">File Reports</h5>
  <app-file-reports-list [fileReportsPage]="this.fileReportsPage" (fileSelected)="onSelectFileReport($event)">
  </app-file-reports-list>
</div>

<router-outlet></router-outlet>