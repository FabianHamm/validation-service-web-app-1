<div class="row mt-2">
  <div class="col-md-12">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a [routerLink]="['../']">Users</a></li>
        <li class="breadcrumb-item active" *ngIf="this.userCopy">
          {{ this.userCopy.username }}
        </li>
      </ol>
    </nav>
  </div>
</div>

<form (ngSubmit)="this.onSave()" #form="ngForm">
  <fieldset class="form-group">
    <legend>{{ this.isInCreationMode() ? 'Create User' : 'Edit User'}}</legend>
    <div class="form-group">
      <label for="name">User Name</label>
      <input type="text" name="name" id="name" class="form-control" placeholder="Enter user name ..."
        aria-describedby="helpId" [(ngModel)]="userCopy.username" required #name="ngModel" />
      <small *ngIf="name.untouched || name.valid" id="helpId" class="text-muted">A name for the
        user</small>
      <span *ngIf="!name.valid && name.touched" class="text-danger">Please enter a name</span>
    </div>
    <div class="form-group">
      <label for="role" class="control-label">Role</label>
      <div>
        <p-dropdown [options]="this.roleTypes" [(ngModel)]="this.userCopy.role" id="role" #role name="role" aria-describedby="helpId"></p-dropdown>

      </div>
      <small id="helpId" class="text-muted">Users can upload files and submit validation tasks. Only Admins may change configurations and settings.</small>

    </div>
    <div class="form-group">
      <label for="password" class="control-label">Password</label>
      <input type="password" name="password" id="password" class="form-control" placeholder="Enter new password ..."
        aria-describedby="helpId" [(ngModel)]="userCopy.password" #password="ngModel" [required]='this.isInCreationMode()' minlength="4"/>
      <small *ngIf="password.untouched || password.valid" id="helpId" class="text-muted">A new login password </small>
      <span *ngIf="!password.valid && password.touched" class="text-danger">Please enter a password with a minimum length of 4 characters</span>
    </div>
  </fieldset>
  <div class="form-group" *ngIf="!form.pristine || isInCreationMode()">
    <div class="row mt-3">
      <div class=" col-md-6 offset-md-3 text-center ">
        <button type="submit" class="btn btn-success btn-block" [disabled]="!form.valid || form.pristine">
          {{ isInCreationMode() ? "Create" : "Save changes" }}
        </button>
        <button type="button" class="btn btn-secondary btn-block mr-1" [disabled]="form.pristine && !creationMode"
          (click)="onCancel()">
          Cancel
        </button>
      </div>
    </div>
  </div>
</form>
